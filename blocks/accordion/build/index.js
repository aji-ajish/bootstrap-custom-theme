(()=>{"use strict";var e={n:t=>{var o=t&&t.__esModule?()=>t.default:()=>t;return e.d(o,{a:o}),o},d:(t,o)=>{for(var s in o)e.o(o,s)&&!e.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:o[s]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};const t=window.wp.blocks,o=JSON.parse('{"apiVersion":2,"name":"bootstrap-custom-theme/accordion","title":"Bootstrap Accordion","category":"custom-blocks","description":"A customizable Bootstrap accordion block","editorScript":"file:./build/index.js","editorStyle":"file:./build/index.css","style":"file:./build/style-index.css","attributes":{"accordionType":{"type":"string","default":"default"},"customId":{"type":"string","default":""},"customClass":{"type":"string","default":""}},"usesContext":["postId"],"providesContext":{"accordionId":"customId"},"supports":{"html":false,"className":false,"anchor":true}}'),s=window.wp.i18n,n=window.wp.components,l=window.wp.blockEditor,c=window.wp.data,a=window.wp.element,r=window.ReactJSXRuntime,i=["bootstrap-custom-theme/accordion-item"],d=JSON.parse('{"apiVersion":2,"name":"bootstrap-custom-theme/accordion-item","title":"Accordion Item","parent":["bootstrap-custom-theme/accordion"],"attributes":{"title":{"type":"string","default":"Accordion Item"},"itemId":{"type":"string","default":""},"customClass":{"type":"string","default":""},"isOpen":{"type":"boolean","default":false}},"supports":{"html":false,"className":false,"inserter":false}}'),p=window.React;var u=e.n(p);(0,t.registerBlockType)(d.name,{...d,edit:({attributes:e,setAttributes:t,clientId:o})=>{const{title:a,itemId:i,isOpen:d,customClass:p}=e,{removeBlock:m}=(0,c.useDispatch)("core/block-editor");return u().useEffect((()=>{i||t({itemId:`accordion-item-${Math.random().toString(36).substr(2,9)}`})}),[i,t]),(0,r.jsxs)("div",{...(0,l.useBlockProps)(),children:[(0,r.jsx)(l.InspectorControls,{children:(0,r.jsxs)(n.PanelBody,{title:(0,s.__)("Item Settings"),children:[(0,r.jsx)(n.TextControl,{label:(0,s.__)("Title"),value:a,onChange:e=>t({title:e})}),(0,r.jsx)(n.TextControl,{label:(0,s.__)("Item ID"),value:i,onChange:e=>t({itemId:e}),help:(0,s.__)("Unique ID for this item (auto-generated if empty)")}),(0,r.jsx)(n.ToggleControl,{label:(0,s.__)("Open by default"),checked:d,onChange:()=>t({isOpen:!d})}),(0,r.jsx)(n.TextControl,{label:(0,s.__)("Custom Class"),value:p,onChange:e=>t({customClass:e})})]})}),(0,r.jsxs)("div",{className:"accordion-item-editor",children:[(0,r.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[(0,r.jsx)("button",{onClick:()=>{m(o)},style:{background:"none",border:"1px solid red",color:"red",cursor:"pointer"},children:"âœ•"}),(0,r.jsx)("button",{className:"accordion-button "+(d?"":"collapsed"),type:"button",style:{pointerEvents:"none"},children:a||(0,s.__)("New Tab")})]}),(0,r.jsx)("div",{className:"accordion-collapse "+(d?"show":""),children:(0,r.jsx)("div",{className:"accordion-body",children:(0,r.jsx)(l.InnerBlocks,{template:[["core/paragraph",{placeholder:(0,s.__)("Accordion content goes here...")}]],renderAppender:l.InnerBlocks.ButtonBlockAppender})})})]})]})},save:({attributes:e})=>{const{title:t,itemId:o,customClass:s,isOpen:n}=e,c=`heading-${o}`,a=`collapse-${o}`;return(0,r.jsxs)("div",{className:`accordion-item ${s||""}`,children:[(0,r.jsx)("h2",{className:"accordion-header",id:c,children:(0,r.jsx)("button",{className:"accordion-button "+(n?"":"collapsed"),type:"button","data-bs-toggle":"collapse","data-bs-target":`#${a}`,"aria-expanded":n,"aria-controls":a,children:t})}),(0,r.jsx)("div",{id:a,className:"accordion-collapse collapse "+(n?"show":""),"aria-labelledby":c,children:(0,r.jsx)("div",{className:"accordion-body",children:(0,r.jsx)(l.InnerBlocks.Content,{})})})]})}}),(0,t.registerBlockType)(o.name,{...o,edit:({attributes:e,setAttributes:o,clientId:d})=>{const{accordionType:p,customId:u,customClass:m}=e,[b,h]=(0,a.useState)(0),{getBlocks:g,getBlockOrder:x}=(0,c.useSelect)("core/block-editor"),{insertBlock:y,replaceInnerBlocks:I}=(0,c.useDispatch)("core/block-editor"),k=g(d),f=x(d);return console.log("Current blocks (objects):",k),console.log("Current block IDs:",f),(0,a.useEffect)((()=>{if(u||o({customId:`accordion-${Math.random().toString(36).slice(2,11)}`}),0===k.length){console.log("Initializing first item");const e=(0,t.createBlock)("bootstrap-custom-theme/accordion-item",{title:"Accordion Item #1",isOpen:"always-open"!==p,itemId:`item-${Date.now()}`});I(d,[e])}}),[]),(0,r.jsxs)("div",{...(0,l.useBlockProps)({key:b}),children:[" ",(0,r.jsx)(l.InspectorControls,{children:(0,r.jsxs)(n.PanelBody,{title:(0,s.__)("Accordion Settings"),children:[(0,r.jsx)(n.SelectControl,{label:(0,s.__)("Accordion Type"),value:p,options:[{label:"Default",value:"default"},{label:"Flush",value:"flush"},{label:"Always Open",value:"always-open"}],onChange:e=>o({accordionType:e})}),(0,r.jsx)(n.TextControl,{label:"Custom ID",value:u,onChange:e=>o({customId:e})}),(0,r.jsx)(n.TextControl,{label:"Custom Class",value:m,onChange:e=>o({customClass:e})}),(0,r.jsx)(n.Button,{variant:"primary",onClick:async()=>{console.log("Attempting to add item...");try{const e=(0,t.createBlock)("bootstrap-custom-theme/accordion-item",{title:`Accordion Item #${k.length+1}`,isOpen:"always-open"===p,itemId:`item-${Date.now()}`});console.log("Created block:",e),await y(e,k.length,d),console.log("insertBlock completed"),h(Date.now()),setTimeout((()=>{g(d).some((t=>t.clientId===e.clientId))||(console.warn("Block not inserted, trying replaceInnerBlocks"),I(d,[...k,e]))}),500)}catch(e){console.error("Failed to add item:",e),(()=>{const e=document.querySelector(`[data-block="${d}"] .block-editor-inner-blocks`);e&&e.insertAdjacentHTML("beforeend",`\n            <div data-block="${newItem.clientId}" class="wp-block bootstrap-custom-theme-accordion-item">\n              [Accordion Item - please save and refresh]\n            </div>\n          `)})()}},style:{marginTop:10},children:(0,s.__)("Add New Item")})]})}),(0,r.jsxs)("div",{style:{border:"1px dashed #ccc",padding:10,marginBottom:10,backgroundColor:"#f5f5f5"},children:[(0,r.jsx)("strong",{children:"Debug Info:"}),(0,r.jsxs)("div",{children:["Block Count: ",k.length]}),(0,r.jsxs)("div",{children:["Client ID: ",d]})]}),(0,r.jsx)(l.InnerBlocks,{allowedBlocks:i,renderAppender:!1,orientation:"vertical",templateLock:!1})]})},save:({attributes:e})=>{const{accordionType:t,customId:o,customClass:s}=e,n=["accordion","flush"===t?"accordion-flush":"",s||""].filter(Boolean).join(" "),c=o,a="always-open"===t;return(0,r.jsx)("div",{...l.useBlockProps.save(),children:(0,r.jsx)("div",{className:n,id:c,"data-always-open":a?"true":"false",children:(0,r.jsx)(l.InnerBlocks.Content,{})})})}})})();